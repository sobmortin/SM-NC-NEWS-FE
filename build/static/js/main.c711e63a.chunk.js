(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){},24:function(e,t,a){e.exports=a(63)},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);a(25);var n=a(0),c=a.n(n),r=a(20),o=a.n(r),i=(a(30),a(1)),l=a(2),s=a(4),u=a(3),m=a(5),p=(a(13),a(31),a(32),a(33),a(34),a(35),a(6)),h=a(7),d=a.n(h),f="https://the-nc-news.herokuapp.com",v=function(){return d.a.get("".concat(f,"/api/articles?limit=100"))},g=function(e){return d.a.get("".concat(f,"/api/articles/").concat(e))},E=function(){return d.a.get("".concat(f,"/api/topics"))},b=function(e){return d.a.get("".concat(f,"/api").concat(e))},y=function(){return d.a.get("".concat(f,"/api/users"))},O=function(e){return d.a.get("".concat(f,"/api/users/").concat(e,"/articles")).catch()},C=function(e){return d.a.get("".concat(f,"/api/articles/").concat(e,"/comments")).catch()},j=function(e){return d.a.get("".concat(f,"/api/users/").concat(e)).catch()},S=function(e){return d.a.get("".concat(f,"/api/articles?sort_by=").concat(e)).catch()},N=function(e,t,a){return d.a.post("".concat(f,"/api/articles/").concat(e,"/comments"),{username:t,body:a}).catch()},k=function(e,t){return d.a.patch("".concat(f,"/api/articles/").concat(t),{inc_votes:"".concat(e)}).catch()},A=function(e,t,a){return d.a.patch("".concat(f,"/api/articles/").concat(t,"/comments/").concat(a),{inc_votes:"".concat(e)}).catch()},w=function(e,t,a,n){return d.a.post("".concat(f,"/api/topics/").concat(e,"/articles"),{title:t,body:a,username:n})},T=function(e){return d.a.delete("".concat(f,"/api/articles/").concat(e))},D=function(e,t){return d.a.delete("".concat(f,"/api/articles/").concat(e,"/comments/").concat(t))},U=function(e,t){return d.a.post("".concat(f,"/api/topics"),{description:e,slug:t})},I=function(){return c.a.createElement("div",null,c.a.createElement("p",{className:"error-message"},"Bad Request: 400!"))},V=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={articles:[],topic:"",user:"",loading:!0,err:!1},a.getAllArticles=function(){v().then(function(e){var t=e.data;a.setState({articles:t.articles,loading:!1,topic:"",err:!1})})},a.getArticlesByTopic=function(e){b(e).then(function(e){var t=e.data;a.setState({articles:t.articles,loading:!1,topic:a.props.topic,err:!1})}).catch(function(e){a.setState({err:!0})})},a.getArticlesByUser=function(e){O(e).then(function(e){var t=e.data;a.setState({articles:t.articles,loading:!1,err:!1})})},a.handleSortClick=function(e){var t=e.target.value;S(t).then(function(e){var t=e.data.articles;a.setState({articles:t,err:!1})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.user?this.props.user?this.getArticlesByUser(this.props.user):this.getAllArticles():this.props.topic&&this.props.topic?this.getArticlesByTopic(this.props.uri):this.getAllArticles()}},{key:"componentDidUpdate",value:function(e,t){e.user!==this.props.user&&("/articles"===this.props.uri?this.getAllArticles():this.getArticlesByUser(this.props.user)),e.topic!==this.props.topic&&(this.props.topic?this.getArticlesByTopic(this.props.uri):this.getAllArticles())}},{key:"render",value:function(){var e=this.state.topic;return this.state.err?c.a.createElement(I,null):this.state.loading?c.a.createElement("p",null,"loading..."):c.a.createElement("div",{className:"Main"},this.state.topic?c.a.createElement("h1",{className:"Page-Title"},e.charAt(0).toUpperCase()+e.slice(1)," Articles"):c.a.createElement("h1",{className:"Page-Title"},"Articles"),c.a.createElement("div",{className:"sort-buttons"}," ",c.a.createElement("p",null,"Sort Articles"),c.a.createElement("button",{value:"created_at",onClick:this.handleSortClick},"date"),c.a.createElement("button",{value:"votes",onClick:this.handleSortClick},"votes"),c.a.createElement("button",{value:"comment_count",onClick:this.handleSortClick},"comment count")),c.a.createElement("ul",null,this.state.articles.map(function(e){return c.a.createElement("li",{key:e.article_id,className:"individual-item"},c.a.createElement("div",null,c.a.createElement(p.a,{className:"Link",to:"/article/".concat(e.article_id)},e.title),c.a.createElement("p",{className:"comment-and-votes"},"comments: ",e.comment_count),c.a.createElement("p",{className:"comment-and-votes"},"votes: ",e.votes)))})))}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={topics:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("nav",{className:"Topnav"},c.a.createElement(p.a,{className:"Topnav-Button",to:"/"},"HOME"),c.a.createElement(p.a,{className:"Topnav-Button",to:"/articles"},"ARTICLES"),c.a.createElement(p.a,{className:"Topnav-Button",to:"/articles/topics"},"TOPICS"),c.a.createElement(p.a,{className:"Topnav-Button",to:"/users"},"USERS"))}}]),t}(n.Component),B=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"Main"},c.a.createElement("h1",null,"Home"),c.a.createElement("p",null," Welcome to NC News"))}}]),t}(n.Component),_=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={newVote:0},a.handleCommentVote=function(e){var t=a.props,n=t.articleID,c=t.commentID;A(e,n,c).then(function(){a.setState(function(t){return{newVote:t.newVote+e}})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.votes,a=this.state.newVote;return c.a.createElement("div",null,c.a.createElement("button",{disabled:1===a,onClick:function(){return e.handleCommentVote(1)}},"Vote Up"),c.a.createElement("span",null,"Votes : ",t),c.a.createElement("button",{disabled:-1===a,onClick:function(){return e.handleCommentVote(-1)}},"Vote Down"))}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={comments:[],body:"",deleted:!1},a.getCommentsForArticle=function(e){C(e).then(function(e){var t=e.data;a.setState({comments:t.comments})})},a.handleCommentChange=function(e){a.setState({body:e.target.value})},a.handleCommentSubmit=function(e){e.preventDefault();var t=a.state.body,n=a.props,c=n.id,r=n.loggedInUser.username;N(c,r,t),a.setState({body:""})},a.handleCommentDelete=function(e){e.preventDefault();var t=e.target.value,n=a.props.id;D(n,t).then(function(e){C(n).then(function(e){var t=e.data;a.setState({comments:t.comments})})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getCommentsForArticle(this.props.id)}},{key:"componentDidUpdate",value:function(e,t){t.comments!==this.state.comments&&this.getCommentsForArticle(this.props.id),t.commentDeleted&&this.getCommentsForArticle(this.props.id)}},{key:"render",value:function(){var e=this,t=this.state.comments,a=this.props.loggedInUser.username;return c.a.createElement("div",null,c.a.createElement("form",{action:"",className:"comment-form"},c.a.createElement("textarea",{className:"comment-box",rows:"2",columns:"50",type:"text",value:this.state.body,onChange:this.handleCommentChange})),c.a.createElement("button",{className:"comment-button",onClick:this.handleCommentSubmit},"Post Comment"),c.a.createElement("ul",{className:"Comments-container"},t.map(function(t){var n=t.votes,r=t.created_at,o=t.author,i=t.comment_id,l=t.body;return c.a.createElement("li",{key:i,className:"Comments-item"},c.a.createElement("p",{className:"comment-body"}," ",l),c.a.createElement(p.a,{to:"/articles/".concat(o)},o),"|"," ",c.a.createElement("span",null,r),c.a.createElement(_,{votes:n,commentID:i,articleID:e.props.id}),o===a&&c.a.createElement("button",{className:"comment-delete",value:i,onClick:e.handleCommentDelete},"Delete Comment"))})))}}]),t}(n.Component),P=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={newVote:0},a.handleVote=function(e){var t=a.props.articleID;k(e,t).then(function(){a.setState(function(t){return{newVote:t.newVote+e}})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.votes,a=this.state.newVote;return c.a.createElement("div",null,c.a.createElement("button",{disabled:1===a,onClick:function(){return e.handleVote(1)}},"Vote Up"),c.a.createElement("span",null,"Votes : ",t+a),c.a.createElement("button",{disabled:-1===a,onClick:function(){return e.handleVote(-1)}},"Vote Down"))}}]),t}(n.Component),F=a(22),L=a.n(F),q=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("p",{className:"error-message"},"Oops.. We couldnt find this for you"))}}]),t}(n.Component),J=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={article:{},error:!1,deleted:!1,loading:!0},a.getIndividualArticles=function(e){g(e).then(function(e){var t=e.data;t?a.setState({article:t.article,loading:!1}):a.setState({error:!0})})},a.handleDelete=function(e){e.preventDefault();var t=e.target.value;T(t).then(function(e){a.setState({deleted:!0,loading:!1})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getIndividualArticles(this.props.id)}},{key:"render",value:function(){var e=this.state.article,t=e.topic,a=e.votes,n=e.title,r=e.body,o=e.author,i=e.comment_count,l=e.created_at,s=e.article_id,u=this.props.loggedInUser.username;return this.state.article.hasOwnProperty("title")?this.state.deleted?c.a.createElement("p",null,"article deleted"):c.a.createElement("div",{className:"Main"},c.a.createElement("h1",{className:"Header"},n),c.a.createElement("p",{className:"article"},r),c.a.createElement("span",null,c.a.createElement(p.a,{to:"/topics/".concat(t,"/articles")},t))," | ",c.a.createElement("span",null,c.a.createElement(p.a,{to:"/articles/".concat(o)},o)),c.a.createElement("p",null,i),c.a.createElement("span",null," ",L()(l).format("MMM Do YY")),c.a.createElement(P,{votes:a,articleID:s}),u===o&&c.a.createElement("button",{onClick:this.handleDelete,value:s},"delete article"),s&&c.a.createElement(x,{id:s,loggedInUser:this.props.loggedInUser})):c.a.createElement(q,null)}}]),t}(n.Component),W=function(){return c.a.createElement("div",{className:"Banner"},c.a.createElement("p",null,c.a.createElement("strong",null,"NC "),"News"))},H=function(){return c.a.createElement("div",{className:"Footer"},c.a.createElement("p",{className:"Footer-text"},"By Sebastian Martin"))},R=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={topics:[]},a.getTopics=function(){E().then(function(e){var t=e.data;a.setState({topics:t.topics})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getTopics()}},{key:"render",value:function(){return c.a.createElement("div",{className:"Sidebar"},this.props.user?c.a.createElement("div",{className:"sidebar-text"},c.a.createElement("div",{className:"welcome-notice"},"Welcome ",this.props.user.username),c.a.createElement("button",{onClick:this.props.logout},"Logout")):c.a.createElement("p",{className:"welcome-notice"},"Please Login"),c.a.createElement("p",null,this.props.user&&c.a.createElement(p.a,{className:"write-article-link",to:"/article/create"},"Write Article")))}}]),t}(n.Component),Y=a(23),G=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={topics:[],newTopicDescription:"",newTopicSlug:"",loading:!0},a.getTopics=function(){E().then(function(e){var t=e.data;a.setState({topics:t.topics,loading:!1})})},a.handleTopicChange=function(e){a.setState({newTopicDescription:e.target.value,loading:!1})},a.handleSlugChange=function(e){a.setState({newTopicSlug:e.target.value,loading:!1})},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.newTopicDescription,c=t.newTopicSlug;U(n,c).then(function(e){var t=e.data;a.setState(function(e){return{topics:[].concat(Object(Y.a)(e.topics),[t]),loading:!1}})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getTopics()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.state.topics;return this.state.loading?c.a.createElement("p",null,"loading..."):c.a.createElement("div",{className:"Topics"},c.a.createElement("h1",{className:"Page-Title"},"Topics"),c.a.createElement("ul",{className:"topics-list"},e.map(function(e){return c.a.createElement(p.a,{to:"/topics/".concat(e.slug,"/articles"),key:e.slug,className:"Topic-Link"},e.slug,": ",e.description)})),c.a.createElement("form",{action:""},c.a.createElement("input",{className:"slug",type:"text",placeholder:"create new topic",onChange:this.handleSlugChange}),c.a.createElement("input",{className:"description",type:"text",placeholder:"give a brief description",onChange:this.handleTopicChange}),c.a.createElement("button",{onClick:this.handleSubmit},"Create!")))}}]),t}(n.Component),z=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={user:{}},a.handleChange=function(e){var t=e.target.value;a.setState({user:t})},a.handleSubmit=function(e){e.preventDefault();var t=a.props.login,n=a.state.user;a.setState({user:n}),t(n)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.user?c.a.createElement("div",null,this.props.children):c.a.createElement("div",{className:"Main"},c.a.createElement("form",{className:"login-form"},c.a.createElement("input",{placeholder:"Enter username",onChange:this.handleChange,required:!0}),c.a.createElement("button",{type:"submit",onClick:this.handleSubmit},"Log in"),c.a.createElement("p",null,"Please use happyamy2016 for testing")))}}]),t}(n.Component),K=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={existingTopics:[],title:"",body:"",user:"",topic:"",added:!1},a.handleTitleChange=function(e){var t=e.target.value;a.setState({title:t})},a.handleTopicChange=function(e){var t=e.target.value;a.setState({topic:t})},a.handleArticleChange=function(e){var t=e.target.value;a.setState({body:t})},a.handleArticleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.topic,c=t.title,r=t.body,o=a.props.loggedInUser.username;w(n,c,r,o).then(function(e){e.data;a.setState({added:!0})})},a.getTopics=function(){E().then(function(e){var t=e.data;a.setState({existingTopics:[t.topics]})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getTopics()}},{key:"render",value:function(){var e=this.state,t=e.added,a=e.existingTopics;return t?c.a.createElement("p",null,"Article added! Go to articles to view it"):c.a.createElement("div",{className:"write-article"},c.a.createElement("form",{className:"article-form"},c.a.createElement("h1",null,"Title"),c.a.createElement("textarea",{required:!0,name:"Title",id:"Title",cols:"50",rows:"1",onChange:this.handleTitleChange}),c.a.createElement("p",null,"Topic"),c.a.createElement("select",{className:"topic-selector"},a.map(function(e){return c.a.createElement("option",{key:e.slug,value:e.slug},e.slug)})),c.a.createElement("p",null,"Article"),c.a.createElement("textarea",{required:!0,name:"Body",id:"Body",cols:"60",rows:"8",onChange:this.handleArticleChange}),c.a.createElement("p",null,"Submit!"),c.a.createElement("button",{onClick:this.handleArticleFormSubmit},"Post Article")))}}]),t}(n.Component),Q=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={users:[],loading:!0},a.getUsers=function(){y().then(function(e){var t=e.data;a.setState({users:t.users,loading:!1})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getUsers()}},{key:"render",value:function(){var e=this.state.users;return c.a.createElement("div",null,c.a.createElement("h1",{className:"Page-Title"},"Users"),c.a.createElement("ul",{className:"item-container"},e.map(function(e){return console.log(e),c.a.createElement("div",{key:e.username},c.a.createElement(p.a,{className:"individual-item",to:"/articles/".concat(e.username)},e.username))})))}}]),t}(n.Component),X=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={user:null},a.setUser=function(e){return j(e).then(function(e){var t=e.data;a.setState({user:t.user}),localStorage.setItem("user",JSON.stringify(t.user))})},a.clearUser=function(){a.setState({user:null}),localStorage.removeItem("user")},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("user"),t=JSON.parse(e);this.setState({user:t})}},{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(W,null),c.a.createElement(M,null),c.a.createElement(R,{user:this.state.user,logout:this.clearUser}),c.a.createElement(z,{login:this.setUser,logout:this.clearUser,user:this.state.user},c.a.createElement(p.b,{className:"Main"},c.a.createElement(B,{path:"/"}),c.a.createElement(V,{path:"/articles"}),c.a.createElement(V,{path:"/topics/:topic/articles/"}),c.a.createElement(V,{path:"/articles/:user"}),c.a.createElement(V,{path:"/articles/?sort_by"}),c.a.createElement(J,{path:"/article/:id",loggedInUser:this.state.user}),c.a.createElement(G,{path:"/articles/topics"}),c.a.createElement(Q,{path:"/users"}),c.a.createElement(x,{path:"/articles/comments",loggedInUser:this.state.user}),c.a.createElement(P,{path:"articles/voter"}),c.a.createElement(K,{path:"/article/create",loggedInUser:this.state.user}),c.a.createElement(I,{default:!0})),c.a.createElement(H,null)))}}]),t}(n.Component);o.a.render(c.a.createElement(X,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.c711e63a.chunk.js.map